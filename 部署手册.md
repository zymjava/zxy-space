# zxy 个人简历站 · 部署与内容维护手册

本站用于展示个人简历，访问地址：**http://zxy.vvlab.xyz**。  
所有**文案和照片**都在本项目的 **data/** 与 **assets/photos/** 中维护，修改后按「发布步骤」推送并构建即可更新网站。

---

## 一、如何修改个人简历上的内容

简历内容与照片**分离存放**：文字在 **data/content.json**，照片路径在 **data/photos.json**，照片文件在 **assets/photos/**。用任意文本编辑器（记事本、VS Code、Cursor 等）打开 JSON 文件即可修改，注意不要删掉引号、逗号、方括号/花括号，否则页面会加载失败。

---

### 1. 基本信息（姓名、年龄、电话、邮箱、头像照片）

**文件**：`data/content.json`，找到最上面的 **basicInfo** 一段。

**要改的字段**：

| 字段 | 说明 | 示例 |
|------|------|------|
| name | 姓名 | "祝晓燕" |
| phone | 电话 | "16651611713" |
| email | 邮箱 | "16651611713@163.com" |
| items | 列表，每项有 label 和 value，对应页面上一行「标签：值」 | 可增删项，如加 "现居"："上海" |

**头像照片**：

- 在 **data/content.json** 的 basicInfo 里有一项 **"photo": "avatar"**，表示使用「名为 avatar 的照片」。
- 在 **data/photos.json** 里配置这个名字对应的文件路径，例如：**"avatar": "assets/photos/avatar.png"**。
- 把实际头像图片放到 **assets/photos/** 文件夹里，文件名与 photos.json 里写的一致（如 **avatar.png**）。若换新头像，可替换该文件并保持文件名不变，或改新文件名后在 photos.json 里改路径、在 content.json 里改 photo 的值。

**示例**（只改姓名和电话）：

```json
"basicInfo": {
  "title": "基本信息",
  "photo": "avatar",
  "name": "张三",
  "phone": "13800138000",
  "email": "zhangsan@email.com",
  "items": [
    { "label": "姓名", "value": "张三" },
    { "label": "年龄", "value": "28" },
    { "label": "电话", "value": "13800138000" },
    { "label": "邮箱", "value": "zhangsan@email.com" }
  ]
}
```

---

### 2. 求职意向（岗位、城市、薪资、当前状态等）

**文件**：`data/content.json`，找到 **jobIntent** 一段。

**要改的字段**：

| 字段 | 说明 |
|------|------|
| position | 意向岗位 |
| city | 意向城市 |
| salary | 期望薪资 |
| lines | 字符串数组，每一条会单独成段显示（如「当前状态：随时到岗」） |

可按需增删或修改 `lines` 里的句子。

---

### 3. 教育经历

**文件**：`data/content.json`，找到 **education** 一段。

**结构**：`items` 是一个数组，每条一段教育经历。每条里：

| 字段 | 说明 |
|------|------|
| school | 学校名称 |
| time | 在校时间（如 "2013.9-2017.6"） |
| major | 专业（可留空 ""） |
| degree | 学历（可留空 ""） |

**多条经历**：在 `items` 里多写一个对象即可，例如：

```json
"items": [
  { "school": "某某大学", "major": "计算机", "degree": "本科", "time": "2010.9-2014.6" },
  { "school": "某某研究生院", "major": "软件工程", "degree": "硕士", "time": "2014.9-2017.6" }
]
```

---

### 4. 自我评价

**文件**：`data/content.json`，找到 **selfEval** 一段。

**要改的**：**points** 是一个字符串数组，每一条对应页面上一段话。直接增删或修改数组里的字符串即可，例如：

```json
"selfEval": {
  "title": "自我评价",
  "points": [
    "第一条自我评价内容",
    "第二条自我评价内容"
  ]
}
```

---

### 5. 工作经历

**文件**：`data/content.json`，找到 **workExp** 一段。

**结构**：**items** 是数组，每条一段工作。每条里：

| 字段 | 说明 |
|------|------|
| company | 公司名称 |
| position | 职位（如 "产品经理 \| 中台、SaaS"） |
| time | 在职时间（如 "2021.10-至今"） |
| summary | 一段话概述（可选） |
| points | 字符串数组，每条一句职责或成果 |

**增删某段工作**：在 `items` 里增删一个对象；修改某段工作就改对应对象里的字段。

---

### 6. 项目经历

**文件**：`data/content.json`，找到 **projectExp** 一段。

**结构**：**items** 是数组，每条一个项目。每条里：

| 字段 | 说明 |
|------|------|
| name | 项目名称 |
| role | 担任角色（可留空 ""） |
| time | 项目时间（可留空 ""） |
| tech | 技术栈（可留空 ""） |
| summary | 一段话概述（可选） |
| points | 字符串数组，如「背景」「过程」「结果」等，每句一条 |

**增删项目**：在 `items` 里增删一个对象；修改就改对应对象里的字段。

---

### 7. 照片文件与 data/photos.json

- **照片文件**：统一放在 **assets/photos/** 下，例如 `avatar.png`、`work1.jpg`。
- **data/photos.json**：用来给照片起「名字」并写路径，方便在 content.json 里引用。例如：
  ```json
  {
    "avatar": "assets/photos/avatar.png",
    "work1": "assets/photos/work1.jpg"
  }
  ```
- 在 **data/content.json** 的 basicInfo 里，**"photo": "avatar"** 就表示使用 photos.json 里 **avatar** 对应的路径。若在 photos.json 里加了 **"myphoto": "assets/photos/myphoto.jpg"**，把 basicInfo 的 photo 改成 **"myphoto"** 即可换头像。

**注意**：修改 JSON 时不要漏掉逗号、引号，或多删括号。改完可用浏览器打开本地的 index.html（需通过「本地服务器」方式打开，见 README）预览效果。

---

## 二、发布新版本（让网站显示你刚改的内容）

改完 **data/content.json**、**data/photos.json** 或 **assets/photos/** 里的文件后，按下面顺序做，网站才会更新。

### 第 1 步：提交并推送到 GitHub

在电脑上打开命令行（PowerShell 或 CMD），进入 zxy 目录后执行（路径按你的实际位置改）：

```bash
cd c:\Users\admin\vvlab\zxy
git add .
git commit -m "更新简历内容"
git push origin main
```

若分支叫 **master** 而不是 main，最后一条改成：`git push origin master`。  
推送成功后，GitHub 上的 zxy-space 仓库会是最新内容。

### 第 2 步：在阿里云 ACR 触发镜像构建

1. 打开 [阿里云容器镜像服务](https://cr.console.aliyun.com/) → 个人版。
2. 找到镜像仓库 **zxy-repo**，点进去。
3. 点 **构建** 或 **构建记录**，再点 **立即构建**。
4. 等构建状态变为 **成功**。

若构建规则里**没有勾选「同时打 latest 标签」**，构建完成后需在 **镜像版本** 里给本次镜像再打一个 **latest** 标签，否则下一步重启后可能拉不到新镜像。

### 第 3 步：在服务器上重启站点

SSH 登录到服务器 **139.224.31.98** 后，执行：

```bash
kubectl rollout restart deployment/zxy-site -n demo
kubectl rollout status deployment/zxy-site -n demo --timeout=120s
```

出现 `deployment "zxy-site" successfully rolled out` 即表示重启成功。

### 第 4 步：验证

浏览器打开 **http://zxy.vvlab.xyz**，刷新（建议 Ctrl+F5 强制刷新），确认简历内容已更新。

---

## 三、小结表（下次发布照着做）

| 步骤 | 做什么 |
|------|--------|
| 1 | 在本项目里改 **data/content.json**、**data/photos.json** 或 **assets/photos/**，保存 |
| 2 | 命令行在 zxy 目录执行：`git add .` → `git commit -m "更新简历"` → `git push origin main` |
| 3 | 阿里云 ACR → zxy-repo → 构建 → 立即构建，等成功；若无 latest 则给该镜像打 latest |
| 4 | 服务器上执行：`kubectl rollout restart deployment/zxy-site -n demo` |
| 5 | 浏览器打开 http://zxy.vvlab.xyz 刷新核对 |

---

## 四、首次部署与排障（给运维/开发参考）

- **线上地址**：http://zxy.vvlab.xyz（当前未配置 HTTPS，请用 http）。
- **镜像**：阿里云上海个人版 `crpi-c87ddoa33spg7s3f.cn-shanghai.personal.cr.aliyuncs.com/zzlab_imagespace/zxy-repo:latest`。
- **部署与 Ingress**：在 **vvlab-deploy** 仓库的 `deploy/vvlab-sites-zxy-only.yaml`；服务器 139.224.31.98 上 Nginx 已透传 Host，Ingress 按 zxy.vvlab.xyz 指向 zxy-site。
- **排障**：访问 502、镜像拉取失败、构建超时等，见 **vvlab-deploy** 仓库下的 **TROUBLESHOOTING.md** 与 **发布步骤-非开发必读.md**。

本手册只负责「如何改简历内容」和「在本项目内完成发布流程」；服务器与 Nginx/Ingress 的详细架构、排障步骤以 vvlab-deploy 文档为准。
